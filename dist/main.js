(()=>{"use strict";const e=(e,t,n,a)=>{const s=document.createElement("label");s.innerText=e;const d=document.createElement("input");return s.appendChild(d),d.setAttribute("type",t),a&&d.toggleAttribute("required"),d.addEventListener("blur",(()=>{n(d)})),d.addEventListener("focus",(()=>{d.setCustomValidity("")})),{label:s,input:d}},t=document.querySelector("#dropdown"),n=document.createElement("button");n.innerText="I am a button";const a=document.createElement("button");a.innerText="I am a button 2";const s=document.createElement("button");s.innerText="I am a button 3";const d=((e=null,t=[])=>{const n=document.createElement("div");n.className="ddContainer";let a=e;a||(a=document.createElement("div")),n.appendChild(a);const s=document.createElement("div");n.appendChild(s);const d=document.createElement("ul");s.appendChild(d),s.toggleAttribute("hidden"),n.addEventListener("mouseenter",(()=>{s.toggleAttribute("hidden")})),n.addEventListener("mouseleave",(()=>{s.toggleAttribute("hidden")}));const o=t;return o.forEach((e=>{d.appendChild(e)})),{dropdownContainer:n,title:a,elementContainer:s,elementList:d,elements:o,attachTo:(e,t)=>{t.appendChild(e.dropdownContainer)},setTitle:(e,t)=>{e.title.remove(),e.title=t,e.dropdownContainer.insertBefore(e.title,e.elementContainer)},resetElements:e=>{e.elementsContainer.remove(),e.elementContainer=document.createElement("ul"),e.container.appendChild(e.elementsContainer)},addElement:(e,t)=>{e.elements.push(t),e.elementContainer.appendChild(t)}}})(n,[a,s]);d.attachTo(d,t);const o=(e=>{const t=e,n=document.createElement("div");t.appendChild(n),n.className="carousel";const a=document.createElement("div");n.appendChild(a),a.className="carousel-slider-view";const s=document.createElement("div");a.appendChild(s),s.className="carousel-slider";const d=document.createElement("button");n.appendChild(d),d.className="carousel-arrow",d.classList.add("carousel-arrow-left"),d.innerText="<";const o=document.createElement("button");n.appendChild(o),o.className="carousel-arrow",o.classList.add("carousel-arrow-right"),o.innerText=">";const r=document.createElement("div");n.appendChild(r),r.className="carousel-tab-holder";const i=[],l=(e,t)=>{e.tabs[e.currentIndex].classList.toggle("carousel-tab-selected"),e.tabs[t].classList.toggle("carousel-tab-selected"),e.slider.style.right=100*t+"%",e.currentIndex=t,setTimeout((()=>{e.autoAdvanceImage(e)}),5e3),e.timeoutSkips+=1},c={container:n,addImage:(e,t)=>{const n=document.createElement("div");e.slider.appendChild(n);const a=document.createElement("img");n.appendChild(a),a.src=t,a.className="carousel-img",n.className="carousel-img-holder",e.imgs.push(n);const s=document.createElement("button");e.tabHolder.appendChild(s),s.className="carousel-tab",s.innerText="",e.tabs.push(s),1===e.tabs.length&&e.tabs[0].classList.toggle("carousel-tab-selected");const d=i.length-1;s.addEventListener("click",(()=>{e.changeImage(e,d)}))},imgs:[],parent:t,slider:s,tabs:i,tabHolder:r,currentIndex:0,changeImage:l,timeoutSkips:0,autoAdvanceImage:e=>{0===e.timeoutSkips&&(e.currentIndex>=e.imgs.length-1?l(e,0):l(e,e.currentIndex+1)),e.timeoutSkips-=1}};return o.addEventListener("click",(()=>{c.currentIndex>=c.imgs.length-1?l(c,0):l(c,c.currentIndex+1)})),d.addEventListener("click",(()=>{l(c,c.currentIndex<=0?c.tabs.length-1:c.currentIndex-1)})),setTimeout((()=>{c.autoAdvanceImage(c)}),5e3),c})(document.querySelector("#c-container"));["https://i.ytimg.com/vi/bHZVwmiWPNM/maxresdefault.jpg","https://cdnen.samurai-gamers.com/wp-content/uploads/2021/05/16163043/sg-smt-3-nocturne-hd-remaster-thor-demon-boss.jpg","https://static.wikia.nocookie.net/megamitensei/images/4/4b/Jack_frost_transparent.png","https://i.ytimg.com/vi/z0-qFKpktkA/maxresdefault.jpg","https://images.theconversation.com/files/399366/original/file-20210507-23-7ectsj.jpg?ixlib=rb-1.1.0&rect=6%2C343%2C4486%2C2243&q=45&auto=format&w=1356&h=668&fit=crop"].forEach((e=>{o.addImage(o,e)}));const r=(t=>{const n=document.createElement("form");t.appendChild(n);const a=[],s=document.createElement("input");return s.setAttribute("type","submit"),s.addEventListener("click",(e=>{if(a.some((e=>!e.input.checkValidity())))return!1;console.log("Form Complete!"),e.preventDefault()})),n.appendChild(s),{form:n,inputs:a,addEmail:t=>{const d=e(t,"email",(e=>{e.checkValidity()?e.setCustomValidity(""):e.setCustomValidity("Please enter a valid email address")}),!0);a.push(d),n.insertBefore(d.label,s)},addText:(t,d)=>{const o=e(t,"text",(e=>{e.checkValidity()?e.setCustomValidity(""):e.setCustomValidity(d)}),!0);a.push(o),n.insertBefore(o.label,s)},addPattern:(t,d,o)=>{const r=e(t,"text",(e=>{e.checkValidity()?e.setCustomValidity(""):e.setCustomValidity(o)}),!0);a.push(r),n.insertBefore(r.label,s),r.input.setAttribute("pattern",d)},addPassword:(t,d,o)=>{const r=e(t,"password",(e=>{e.checkValidity()?e.setCustomValidity(""):e.setCustomValidity(o)}),!0);a.push(r),n.insertBefore(r.label,s),r.input.setAttribute("minLength",5)}}})(document.querySelector("#sample-form"));r.addEmail("Email"),r.addText("Country","Please enter a country"),r.addPattern("Postal Code","[a-zA-Z]\\d[a-zA-Z]\\s?\\d[a-zA-Z]\\d","Please enter a valid postal code"),r.addPassword("Password",5,"Please provide a password")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQSxNQUFNRSxhQUFhLFlBQWEsTUNqRTFCLENBREdMLFNBQVNVLGNBQWMsaUJBRTFDdUQsRUFBUVcsU0FBUyxTQUNqQlgsRUFBUVksUUFBUSxVQUFXLDBCQUMzQlosRUFBUWMsV0FBVyxjQUFlLHdDQUF5QyxvQ0FDM0VkLEVBQVFnQixZQUFZLFdBQVksRUFBRyw4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3VpLWVsZW1lbnRzLy4vc3JjL2Ryb3Bkb3duLmpzIiwid2VicGFjazovL3VpLWVsZW1lbnRzLy4vc3JjL2Zvcm0uanMiLCJ3ZWJwYWNrOi8vdWktZWxlbWVudHMvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdWktZWxlbWVudHMvLi9zcmMvaW1hZ2VDYXJvdXNlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZWZhdWx0IGNzcyBzaG91bGQgbG9hZCBiZWZvcmUgdGhlIHBhZ2UncyBzcGVjaWZpYyBjc3Ncbi8vIGNyZWF0ZSBhIGRyb3Bkb3duIG1lbnUgd2l0aCBhIHNwZWNpZmllZCBlbGVtZW50IGFzIHRoZSByb290IHdpdGggb3RoZXIgZWxlbWVudHMgYXMgY2hpbGRyZW5cbmNvbnN0IGRyb3Bkb3duRmFjdG9yeSA9IChteVRpdGxlID0gbnVsbCwgbXlFbGVtZW50cyA9IFtdKSA9PiB7XG4gIC8vIGhvbGRzIHRoZSB0aXRsZSBlbGVtZW50IGFuZCBsaXN0IG9mIGRyb3Bkb3duIGVsZW1lbnRzXG4gIC8vIGluaXRpYWxpemUgdmFyaWFibGVzXG4gIGNvbnN0IGRyb3Bkb3duQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRyb3Bkb3duQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdkZENvbnRhaW5lcic7XG5cbiAgbGV0IHRpdGxlID0gbXlUaXRsZTtcbiAgaWYgKCF0aXRsZSkgeyB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyB9XG4gIGRyb3Bkb3duQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICBjb25zdCBlbGVtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRyb3Bkb3duQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRDb250YWluZXIpO1xuXG4gIGNvbnN0IGVsZW1lbnRMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgZWxlbWVudENvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50TGlzdCk7XG4gIGVsZW1lbnRDb250YWluZXIudG9nZ2xlQXR0cmlidXRlKCdoaWRkZW4nKTtcblxuICBkcm9wZG93bkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgIGVsZW1lbnRDb250YWluZXIudG9nZ2xlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgfSk7XG5cbiAgZHJvcGRvd25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICBlbGVtZW50Q29udGFpbmVyLnRvZ2dsZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gIH0pO1xuXG4gIGNvbnN0IGVsZW1lbnRzID0gbXlFbGVtZW50cztcbiAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnRMaXN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICB9KTtcblxuICAvLyBmdW5jdGlvbnNcbiAgY29uc3QgYXR0YWNoVG8gPSAob2JqLCBwYXJlbnQpID0+IHtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQob2JqLmRyb3Bkb3duQ29udGFpbmVyKTtcbiAgfTtcblxuICBjb25zdCBzZXRUaXRsZSA9IChvYmosIG5ld1RpdGxlKSA9PiB7XG4gICAgLy8gcmVwbGFjZSB0aGUgdGl0bGUgZWxlbWVudFxuICAgIG9iai50aXRsZS5yZW1vdmUoKTtcbiAgICBvYmoudGl0bGUgPSBuZXdUaXRsZTtcblxuICAgIG9iai5kcm9wZG93bkNvbnRhaW5lci5pbnNlcnRCZWZvcmUob2JqLnRpdGxlLCBvYmouZWxlbWVudENvbnRhaW5lcik7XG4gIH07XG5cbiAgY29uc3QgcmVzZXRFbGVtZW50cyA9IChvYmopID0+IHtcbiAgICAvLyBkZWxldGUgYWxsIGRyb3Bkb3duIGVsZW1lbnRzXG4gICAgb2JqLmVsZW1lbnRzQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgIG9iai5lbGVtZW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBvYmouY29udGFpbmVyLmFwcGVuZENoaWxkKG9iai5lbGVtZW50c0NvbnRhaW5lcik7XG4gIH07XG5cbiAgY29uc3QgYWRkRWxlbWVudCA9IChvYmosIGVsZW1lbnQpID0+IHtcbiAgICBvYmouZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICBvYmouZWxlbWVudENvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfTtcblxuICAvLyBidWlsZCB0aGUgb2JqZWN0IHRvIHJldHVyblxuICBjb25zdCBvYmogPSB7XG4gICAgZHJvcGRvd25Db250YWluZXIsXG4gICAgdGl0bGUsXG4gICAgZWxlbWVudENvbnRhaW5lcixcbiAgICBlbGVtZW50TGlzdCxcbiAgICBlbGVtZW50cyxcbiAgICBhdHRhY2hUbyxcbiAgICBzZXRUaXRsZSxcbiAgICByZXNldEVsZW1lbnRzLFxuICAgIGFkZEVsZW1lbnQsXG4gIH07XG4gIHJldHVybiBvYmo7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7IGRyb3Bkb3duRmFjdG9yeSB9O1xuIiwiLy8gIGNyZWF0ZSBhIGZvcm0gdGhhdCB2YWxpZGF0ZXMgbGl2ZVxuLy8gIGFibGUgdG8gYWRkIGZpZWxkcyB0byB0aGUgZm9ybVxuXG5jb25zdCBpbnB1dEZhY3RvcnkgPSAobmFtZSwgdHlwZSwgdmFsaWRhdGlvbiwgcmVxdWlyZWQpID0+IHtcbiAgLy8gIGNyZWF0ZSBsYWJlbCBhbmQgaW5wdXRcbiAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBsYWJlbC5pbm5lclRleHQgPSBuYW1lO1xuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcblxuICAvLyAgc2V0IGlucHV0IHByb3BlcnRpZXNcbiAgaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgdHlwZSk7XG4gIGlmIChyZXF1aXJlZCkge1xuICAgIGlucHV0LnRvZ2dsZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTtcbiAgfVxuICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgIHZhbGlkYXRpb24oaW5wdXQpO1xuICB9KTtcbiAgLy8gIHJlc2V0IGZvcm0gdmFsaWRpdHkgd2hlbiBlZGl0aW5nXG4gIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgIGlucHV0LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcbiAgfSk7XG5cbiAgLy8gIGRvIHN0dWZmXG4gIGNvbnN0IG9iaiA9IHsgbGFiZWwsIGlucHV0IH07XG4gIHJldHVybiBvYmo7XG59O1xuXG5jb25zdCBmb3JtRmFjdG9yeSA9IChjb250YWluZXIpID0+IHtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICBjb25zdCBpbnB1dHMgPSBbXTtcbiAgLy8gIGNyZWF0ZSBzdWJtaXQgYnV0dG9uIGZvciB0aGUgZm9ybVxuICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBzdWJtaXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3N1Ym1pdCcpO1xuICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAvLyAgcHJldmVudCBwYWdlIHJlbG9hZFxuICAgIGlmIChpbnB1dHMuc29tZSgoZWxlbSkgPT4gIWVsZW0uaW5wdXQuY2hlY2tWYWxpZGl0eSgpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnRm9ybSBDb21wbGV0ZSEnKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbiAgZm9ybS5hcHBlbmRDaGlsZChzdWJtaXQpO1xuXG4gIGNvbnN0IGFkZEVtYWlsID0gKHRpdGxlKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IChlbGVtKSA9PiB7XG4gICAgICBpZiAoIWVsZW0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgIGVsZW0uc2V0Q3VzdG9tVmFsaWRpdHkoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaW5wdXQgPSBpbnB1dEZhY3RvcnkodGl0bGUsICdlbWFpbCcsIHZhbGlkYXRpb24sIHRydWUpO1xuICAgIGlucHV0cy5wdXNoKGlucHV0KTtcbiAgICBmb3JtLmluc2VydEJlZm9yZShpbnB1dC5sYWJlbCwgc3VibWl0KTtcbiAgfTtcblxuICBjb25zdCBhZGRUZXh0ID0gKHRpdGxlLCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gKGVsZW0pID0+IHtcbiAgICAgIGlmICghZWxlbS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgZWxlbS5zZXRDdXN0b21WYWxpZGl0eShlcnJvck1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5zZXRDdXN0b21WYWxpZGl0eSgnJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBpbnB1dCA9IGlucHV0RmFjdG9yeSh0aXRsZSwgJ3RleHQnLCB2YWxpZGF0aW9uLCB0cnVlKTtcbiAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgZm9ybS5pbnNlcnRCZWZvcmUoaW5wdXQubGFiZWwsIHN1Ym1pdCk7XG4gIH07XG5cbiAgY29uc3QgYWRkUGF0dGVybiA9ICh0aXRsZSwgcGF0dGVybiwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IChlbGVtKSA9PiB7XG4gICAgICBpZiAoIWVsZW0uY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgIGVsZW0uc2V0Q3VzdG9tVmFsaWRpdHkoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW0uc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgaW5wdXQgPSBpbnB1dEZhY3RvcnkodGl0bGUsICd0ZXh0JywgdmFsaWRhdGlvbiwgdHJ1ZSk7XG4gICAgaW5wdXRzLnB1c2goaW5wdXQpO1xuICAgIGZvcm0uaW5zZXJ0QmVmb3JlKGlucHV0LmxhYmVsLCBzdWJtaXQpO1xuXG4gICAgLy8gYWRkIHRoZSBwYXR0ZXJuIHRvIHRoZSBpbnB1dFxuICAgIGlucHV0LmlucHV0LnNldEF0dHJpYnV0ZSgncGF0dGVybicsIHBhdHRlcm4pO1xuICB9O1xuXG4gIGNvbnN0IGFkZFBhc3N3b3JkID0gKHRpdGxlLCBtaW5MZW5ndGgsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSAoZWxlbSkgPT4ge1xuICAgICAgaWYgKCFlbGVtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgICBlbGVtLnNldEN1c3RvbVZhbGlkaXR5KGVycm9yTWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGlucHV0ID0gaW5wdXRGYWN0b3J5KHRpdGxlLCAncGFzc3dvcmQnLCB2YWxpZGF0aW9uLCB0cnVlKTtcbiAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgZm9ybS5pbnNlcnRCZWZvcmUoaW5wdXQubGFiZWwsIHN1Ym1pdCk7XG5cbiAgICAvLyBhZGQgdGhlIG1pbmxlbmd0aCB0byB0aGUgaW5wdXRcbiAgICBpbnB1dC5pbnB1dC5zZXRBdHRyaWJ1dGUoJ21pbkxlbmd0aCcsIDUpO1xuICB9O1xuXG4gIC8vICBkbyBzdHVmZlxuICBjb25zdCBvYmogPSB7XG4gICAgZm9ybSwgaW5wdXRzLCBhZGRFbWFpbCwgYWRkVGV4dCwgYWRkUGF0dGVybiwgYWRkUGFzc3dvcmQsXG4gIH07XG4gIHJldHVybiBvYmo7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7IGZvcm1GYWN0b3J5IH07XG5cbi8qIDxmb3JtPlxuICAgICAgICAgICAgPGxhYmVsPkVtYWlsPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIiByZXF1aXJlZD48L2lucHV0PjwvYnI+XG4gICAgICAgICAgICA8bGFiZWw+Q291bnRyeTwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiByZXF1aXJlZD48L2lucHV0PjwvYnI+XG4gICAgICAgICAgICA8bGFiZWw+UG9zdGFsIENvZGU8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcmVxdWlyZWQgcGF0dGVybj1cIlthLXpBLVpdXFxkW2EtekEtWl1cXHM/XFxkW2EtekEtWl1cXGRcIj48L2lucHV0PjwvYnI+XG4gICAgICAgICAgICA8bGFiZWw+UGFzc3dvcmQ8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIHJlcXVpcmVkPjwvaW5wdXQ+PC9icj5cbiAgICAgICAgICAgIDxsYWJlbD5Db25maXJtIFBhc3N3b3JkPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiByZXF1aXJlZD48L2lucHV0PjwvYnI+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiU3VibWl0XCI+PC9pbnB1dD5cbiAgICAgICAgICA8L2Zvcm0+ICovXG4iLCJpbXBvcnQgZHJvcGRvd24gZnJvbSAnLi9kcm9wZG93bic7XG5pbXBvcnQgY2Fyb3VzZWwgZnJvbSAnLi9pbWFnZUNhcm91c2VsJztcbmltcG9ydCBmb3JtIGZyb20gJy4vZm9ybSc7XG5cbi8vICBjb2RlIHRvIHVzZSB0aGUgZHJvcGRvd25cbmNvbnN0IGRkSG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Ryb3Bkb3duJyk7XG5cbmNvbnN0IGRkU2FtcGxlVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbmRkU2FtcGxlVGl0bGUuaW5uZXJUZXh0ID0gJ0kgYW0gYSBidXR0b24nO1xuXG5jb25zdCBkZEJ1dHRvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbmRkQnV0dG9uMS5pbm5lclRleHQgPSAnSSBhbSBhIGJ1dHRvbiAyJztcblxuY29uc3QgZGRCdXR0b24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5kZEJ1dHRvbjIuaW5uZXJUZXh0ID0gJ0kgYW0gYSBidXR0b24gMyc7XG5cbmNvbnN0IGRyb3Bkb3duRWxlbSA9IGRyb3Bkb3duLmRyb3Bkb3duRmFjdG9yeShkZFNhbXBsZVRpdGxlLCBbZGRCdXR0b24xLCBkZEJ1dHRvbjJdKTtcbmRyb3Bkb3duRWxlbS5hdHRhY2hUbyhkcm9wZG93bkVsZW0sIGRkSG9sZGVyKTtcblxuLy8gIGNvZGUgdG8gdXNlIHRoZSBjYXJvdXNlbFxuY29uc3QgY0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYy1jb250YWluZXInKTtcbmNvbnN0IGNhcm91c2VsRWxlbSA9IGNhcm91c2VsLmNhcm91c2VsRmFjdG9yeShjQ29udGVudCk7XG5cbmNvbnN0IGltYWdlU3JjcyA9IFsnaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS9iSFpWd21pV1BOTS9tYXhyZXNkZWZhdWx0LmpwZycsXG4gICdodHRwczovL2NkbmVuLnNhbXVyYWktZ2FtZXJzLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyMS8wNS8xNjE2MzA0My9zZy1zbXQtMy1ub2N0dXJuZS1oZC1yZW1hc3Rlci10aG9yLWRlbW9uLWJvc3MuanBnJyxcbiAgJ2h0dHBzOi8vc3RhdGljLndpa2lhLm5vY29va2llLm5ldC9tZWdhbWl0ZW5zZWkvaW1hZ2VzLzQvNGIvSmFja19mcm9zdF90cmFuc3BhcmVudC5wbmcnLFxuICAnaHR0cHM6Ly9pLnl0aW1nLmNvbS92aS96MC1xRktwa3RrQS9tYXhyZXNkZWZhdWx0LmpwZycsXG4gICdodHRwczovL2ltYWdlcy50aGVjb252ZXJzYXRpb24uY29tL2ZpbGVzLzM5OTM2Ni9vcmlnaW5hbC9maWxlLTIwMjEwNTA3LTIzLTdlY3Rzai5qcGc/aXhsaWI9cmItMS4xLjAmcmVjdD02JTJDMzQzJTJDNDQ4NiUyQzIyNDMmcT00NSZhdXRvPWZvcm1hdCZ3PTEzNTYmaD02NjgmZml0PWNyb3AnXTtcblxuaW1hZ2VTcmNzLmZvckVhY2goKHNyYykgPT4ge1xuICBjYXJvdXNlbEVsZW0uYWRkSW1hZ2UoY2Fyb3VzZWxFbGVtLCBzcmMpO1xufSk7XG5cbi8vIGNvZGUgdG8gdXNlIHRoZSBmb3JtXG5jb25zdCBmb3JtSG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NhbXBsZS1mb3JtJyk7XG5jb25zdCBmb3JtT2JqID0gZm9ybS5mb3JtRmFjdG9yeShmb3JtSG9sZGVyKTtcbmZvcm1PYmouYWRkRW1haWwoJ0VtYWlsJyk7XG5mb3JtT2JqLmFkZFRleHQoJ0NvdW50cnknLCAnUGxlYXNlIGVudGVyIGEgY291bnRyeScpO1xuZm9ybU9iai5hZGRQYXR0ZXJuKCdQb3N0YWwgQ29kZScsICdbYS16QS1aXVxcXFxkW2EtekEtWl1cXFxccz9cXFxcZFthLXpBLVpdXFxcXGQnLCAnUGxlYXNlIGVudGVyIGEgdmFsaWQgcG9zdGFsIGNvZGUnKTtcbmZvcm1PYmouYWRkUGFzc3dvcmQoJ1Bhc3N3b3JkJywgNSwgJ1BsZWFzZSBwcm92aWRlIGEgcGFzc3dvcmQnKTtcbiIsIi8vIGNyZWF0ZSBhbiBpbWFnZSBjYXJvdXNlbCBjb250YWluZWQgd2l0aGluIHRoZSBwcm92aWRlZCBlbGVtZW50XG5jb25zdCBjYXJvdXNlbEZhY3RvcnkgPSAocGFyZW50RWxlbSkgPT4ge1xuICAvLyBjcmVhdGUgdGhlIGh0bWwgZWxlbWVudHNcbiAgY29uc3QgcGFyZW50ID0gcGFyZW50RWxlbTtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHBhcmVudC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICBjb250YWluZXIuY2xhc3NOYW1lID0gJ2Nhcm91c2VsJztcblxuICBjb25zdCBzbGlkZXJWaWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzbGlkZXJWaWV3KTtcbiAgc2xpZGVyVmlldy5jbGFzc05hbWUgPSAnY2Fyb3VzZWwtc2xpZGVyLXZpZXcnO1xuXG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBzbGlkZXJWaWV3LmFwcGVuZENoaWxkKHNsaWRlcik7XG4gIHNsaWRlci5jbGFzc05hbWUgPSAnY2Fyb3VzZWwtc2xpZGVyJztcblxuICBjb25zdCBsZWZ0QXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxlZnRBcnJvdyk7XG4gIGxlZnRBcnJvdy5jbGFzc05hbWUgPSAnY2Fyb3VzZWwtYXJyb3cnO1xuICBsZWZ0QXJyb3cuY2xhc3NMaXN0LmFkZCgnY2Fyb3VzZWwtYXJyb3ctbGVmdCcpO1xuICBsZWZ0QXJyb3cuaW5uZXJUZXh0ID0gJzwnO1xuXG4gIGNvbnN0IHJpZ2h0QXJyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJpZ2h0QXJyb3cpO1xuICByaWdodEFycm93LmNsYXNzTmFtZSA9ICdjYXJvdXNlbC1hcnJvdyc7XG4gIHJpZ2h0QXJyb3cuY2xhc3NMaXN0LmFkZCgnY2Fyb3VzZWwtYXJyb3ctcmlnaHQnKTtcbiAgcmlnaHRBcnJvdy5pbm5lclRleHQgPSAnPic7XG5cbiAgY29uc3QgdGFiSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJIb2xkZXIpO1xuICB0YWJIb2xkZXIuY2xhc3NOYW1lID0gJ2Nhcm91c2VsLXRhYi1ob2xkZXInO1xuXG4gIGNvbnN0IHRhYnMgPSBbXTtcbiAgY29uc3QgaW1ncyA9IFtdO1xuICBjb25zdCBjdXJyZW50SW5kZXggPSAwO1xuICBjb25zdCB0aW1lb3V0U2tpcHMgPSAwO1xuXG4gIGNvbnN0IGFkZEltYWdlID0gKG9iaiwgc3JjKSA9PiB7XG4gICAgY29uc3QgaW1nSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb2JqLnNsaWRlci5hcHBlbmRDaGlsZChpbWdIb2xkZXIpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltZ0hvbGRlci5hcHBlbmRDaGlsZChpbWcpO1xuICAgIGltZy5zcmMgPSBzcmM7XG4gICAgaW1nLmNsYXNzTmFtZSA9ICdjYXJvdXNlbC1pbWcnO1xuICAgIGltZ0hvbGRlci5jbGFzc05hbWUgPSAnY2Fyb3VzZWwtaW1nLWhvbGRlcic7XG4gICAgb2JqLmltZ3MucHVzaChpbWdIb2xkZXIpO1xuXG4gICAgY29uc3QgdWlUYWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBvYmoudGFiSG9sZGVyLmFwcGVuZENoaWxkKHVpVGFiKTtcbiAgICB1aVRhYi5jbGFzc05hbWUgPSAnY2Fyb3VzZWwtdGFiJztcbiAgICB1aVRhYi5pbm5lclRleHQgPSAnJztcblxuICAgIG9iai50YWJzLnB1c2godWlUYWIpO1xuICAgIGlmIChvYmoudGFicy5sZW5ndGggPT09IDEpIHsgb2JqLnRhYnNbMF0uY2xhc3NMaXN0LnRvZ2dsZSgnY2Fyb3VzZWwtdGFiLXNlbGVjdGVkJyk7IH1cbiAgICBjb25zdCB0YWJJRCA9IHRhYnMubGVuZ3RoIC0gMTtcblxuICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lciB0byBzd2l0eGggdG8gdGFiXG4gICAgdWlUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBvYmouY2hhbmdlSW1hZ2Uob2JqLCB0YWJJRCk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY2hhbmdlSW1hZ2UgPSAob2JqLCBuZXdJbmRleCkgPT4ge1xuICAgIG9iai50YWJzW29iai5jdXJyZW50SW5kZXhdLmNsYXNzTGlzdC50b2dnbGUoJ2Nhcm91c2VsLXRhYi1zZWxlY3RlZCcpO1xuICAgIG9iai50YWJzW25ld0luZGV4XS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJvdXNlbC10YWItc2VsZWN0ZWQnKTtcblxuICAgIG9iai5zbGlkZXIuc3R5bGUucmlnaHQgPSBgJHtuZXdJbmRleCAqIDEwMH0lYDtcbiAgICBvYmouY3VycmVudEluZGV4ID0gbmV3SW5kZXg7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIG9iai5hdXRvQWR2YW5jZUltYWdlKG9iaik7XG4gICAgfSwgNTAwMCk7XG4gICAgb2JqLnRpbWVvdXRTa2lwcyArPSAxO1xuICB9O1xuXG4gIGNvbnN0IGF1dG9BZHZhbmNlSW1hZ2UgPSAob2JqKSA9PiB7XG4gICAgaWYgKG9iai50aW1lb3V0U2tpcHMgPT09IDApIHtcbiAgICAgIGlmIChvYmouY3VycmVudEluZGV4ID49IG9iai5pbWdzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgY2hhbmdlSW1hZ2Uob2JqLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZUltYWdlKG9iaiwgb2JqLmN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkZWNyZW1lbnQgdGltZW91dCBjb3VudGVyIGJ5IG9uZVxuICAgIG9iai50aW1lb3V0U2tpcHMgLT0gMTtcbiAgfTtcblxuICAvLyBjcmVhdGUgdGhlIG9iamVjdFxuICBjb25zdCBvYmogPSB7XG4gICAgY29udGFpbmVyLFxuICAgIGFkZEltYWdlLFxuICAgIGltZ3MsXG4gICAgcGFyZW50LFxuICAgIHNsaWRlcixcbiAgICB0YWJzLFxuICAgIHRhYkhvbGRlcixcbiAgICBjdXJyZW50SW5kZXgsXG4gICAgY2hhbmdlSW1hZ2UsXG4gICAgdGltZW91dFNraXBzLFxuICAgIGF1dG9BZHZhbmNlSW1hZ2UsXG4gIH07XG5cbiAgLy8gYWRkIGV2ZW50IGxpc3RlbmVycyB0aGF0IHJlZmVyZW5jZSB0aGUgb2JqZWN0XG4gIHJpZ2h0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKG9iai5jdXJyZW50SW5kZXggPj0gb2JqLmltZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgY2hhbmdlSW1hZ2Uob2JqLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hhbmdlSW1hZ2Uob2JqLCBvYmouY3VycmVudEluZGV4ICsgMSk7XG4gICAgfVxuICB9KTtcblxuICBsZWZ0QXJyb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKG9iai5jdXJyZW50SW5kZXggPD0gMCkge1xuICAgICAgY2hhbmdlSW1hZ2Uob2JqLCBvYmoudGFicy5sZW5ndGggLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hhbmdlSW1hZ2Uob2JqLCBvYmouY3VycmVudEluZGV4IC0gMSk7XG4gICAgfVxuICB9KTtcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBvYmouYXV0b0FkdmFuY2VJbWFnZShvYmopO1xuICB9LCA1MDAwKTtcblxuICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgeyBjYXJvdXNlbEZhY3RvcnkgfTtcbiJdLCJuYW1lcyI6WyJpbnB1dEZhY3RvcnkiLCJuYW1lIiwidHlwZSIsInZhbGlkYXRpb24iLCJyZXF1aXJlZCIsImxhYmVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJUZXh0IiwiaW5wdXQiLCJhcHBlbmRDaGlsZCIsInNldEF0dHJpYnV0ZSIsInRvZ2dsZUF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRDdXN0b21WYWxpZGl0eSIsImRkSG9sZGVyIiwicXVlcnlTZWxlY3RvciIsImRkU2FtcGxlVGl0bGUiLCJkZEJ1dHRvbjEiLCJkZEJ1dHRvbjIiLCJkcm9wZG93bkVsZW0iLCJteVRpdGxlIiwibXlFbGVtZW50cyIsImRyb3Bkb3duQ29udGFpbmVyIiwiY2xhc3NOYW1lIiwidGl0bGUiLCJlbGVtZW50Q29udGFpbmVyIiwiZWxlbWVudExpc3QiLCJlbGVtZW50cyIsImZvckVhY2giLCJlbGVtZW50IiwiYXR0YWNoVG8iLCJvYmoiLCJwYXJlbnQiLCJzZXRUaXRsZSIsIm5ld1RpdGxlIiwicmVtb3ZlIiwiaW5zZXJ0QmVmb3JlIiwicmVzZXRFbGVtZW50cyIsImVsZW1lbnRzQ29udGFpbmVyIiwiY29udGFpbmVyIiwiYWRkRWxlbWVudCIsInB1c2giLCJkcm9wZG93biIsImNhcm91c2VsRWxlbSIsInBhcmVudEVsZW0iLCJzbGlkZXJWaWV3Iiwic2xpZGVyIiwibGVmdEFycm93IiwiY2xhc3NMaXN0IiwiYWRkIiwicmlnaHRBcnJvdyIsInRhYkhvbGRlciIsInRhYnMiLCJjaGFuZ2VJbWFnZSIsIm5ld0luZGV4IiwiY3VycmVudEluZGV4IiwidG9nZ2xlIiwic3R5bGUiLCJyaWdodCIsInNldFRpbWVvdXQiLCJhdXRvQWR2YW5jZUltYWdlIiwidGltZW91dFNraXBzIiwiYWRkSW1hZ2UiLCJzcmMiLCJpbWdIb2xkZXIiLCJpbWciLCJpbWdzIiwidWlUYWIiLCJsZW5ndGgiLCJ0YWJJRCIsImZvcm1PYmoiLCJmb3JtIiwiaW5wdXRzIiwic3VibWl0IiwiZXZlbnQiLCJzb21lIiwiZWxlbSIsImNoZWNrVmFsaWRpdHkiLCJjb25zb2xlIiwibG9nIiwicHJldmVudERlZmF1bHQiLCJhZGRFbWFpbCIsImFkZFRleHQiLCJlcnJvck1lc3NhZ2UiLCJhZGRQYXR0ZXJuIiwicGF0dGVybiIsImFkZFBhc3N3b3JkIiwibWluTGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==